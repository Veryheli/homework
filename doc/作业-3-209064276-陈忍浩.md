[TOC]



# 一、string类调研

### 1、构造函数

```c++
string s1("test");  // s2 = "test"
string s2(4, 'T');  // s3 = "TTTT"
string s3("12345", 1, 3);  //s4 = "234"，即 "12345" 的从下标 1 开始，长度为 3 的子串
```

***代码***

```c++
#include <iostream>
#include <string>
using namespace std;
void testConstructor()
{
string s1("test");  // s2 = "test"
string s2(4, 'T');  // s3 = "TTTT"
string s3("12345", 1, 3);  //s4 = "234"，即 "12345" 的从下标 1 开始，长度为 3 的子串
cout<<"s1="<<s1<<" s2="<<s2<<" s3="<<s3<<endl;
}
int main()
{
    testConstructor();
    return 0;
}
```

***截图***

![](https://pic.imgdb.cn/item/61499df42ab3f51d91e9c694.png)

### 2、string对象的赋值

```c++
string s1;
s1 = "test";  // s1 = "test"
s2 = 'K';  // s2 = "K"
```

***代码***

```c++
#include <iostream>
#include <string>
using namespace std;
void giveVal()
{
    string s1;
    s1 = "hello";
    cout<<s1<<endl;
    s1 = 'K';
    cout<<s1<<endl;
}
int main()
{
    giveVal();

   return 0;
}
```

***截图***

![](https://pic.imgdb.cn/item/6149a1142ab3f51d91eeef2b.png)

### 3、求字符串的长度

```c++
//size函数和length函数
```

```c++
string s1 = "hellotest";
int a = s1.length();
int b = s1.size();//这两个函数功能相同
```

***代码***

```c++
#include <iostream>
#include <string>
using namespace std;
void test_for_Length()
{
    string s1 = "hellotest";
    int a = s1.length();
    int b = s1.size();
    cout<<"a = "<<a<<" b = "<<b<<endl;

}
int main()
{
    test_for_Length();
   return 0;
}
```

***截图***

![](https://pic.imgdb.cn/item/6149a2c62ab3f51d91f1a4c1.png)

### 4、string对象中字符串的拼接

```c++
    string s1("abc");
    string s2("def");
    string s3 = s1.append(s2);// 先将s1后追加上s2的内容，再将s1赋给s3
    string s4 = s1.append(s2,1,2);//将s2下标1～2的元素追加到s1中
    string s5 = s1.append(4,'T');//在是s1后追加4个'T'，再将值赋给s5
    string s6 = s1.append("ABCD",2,3);//和s4同理
    string s7 = s1 + s2;
    s1 += s2;//也可用'+'、'+='对两个string对象进行运算
```

***代码***

```c++
#include <iostream>
#include <string>
using namespace std;
void cal()
{
    string s1("abc");
    string s2("def");
    string s3 = s1.append(s2);
    string s4 = s1.append(s2,1,2);
    string s5 = s1.append(4,'T');
    string s6 = s1.append("ABCD",2,3);
    string s7 = s1 + s2;
    s1 += s2;
    cout<<"s3 = "<<s3<<"\ns4 = "<<s4<<"\ns5 = "<<s5<<"\ns6 = "
        <<s6<<"\ns7 = "<<s7<<"\ns1 = "<<s1<<endl;

}
int main()
{
    cal();
    return 0;
}
```

***截图***

![](https://pic.imgdb.cn/item/6149b4ca2ab3f51d910b1bd0.png)

### 5、求string对象的子串

```c++
 string s1 = "abcdefghijklmn";
 string s2 = s1.substr(2,4);//s2 = "cdef" ,从下标为2开始截取四个元素
 string s3 = s1.substr(2);//从下标为2开始截取到字符串结尾
```

***代码***

```c++
#include <iostream>
#include <string>
using namespace std;
void subtest()
{
    string s1 = "abcdefghijklmn";
    string s2 = s1.substr(2,4);
    string s3 = s1.substr(2);
    cout<<"s2 = "<<s2<<"\ns3 = "<<s3<<endl;
}
int main()
{
    subtest();
   return 0;
}
```

***截图***

![](https://pic.imgdb.cn/item/6149b6872ab3f51d910d4f62.png)

### 6、比较两个字符串

compare 成员函数有以下返回值：

- 小于 0 表示当前的字符串小；
- 等于 0 表示两个字符串相等；
- 大于 0 表示另一个字符串小。

```c++
string s1("hello"), s2("hello, world");
int n[6];
n[0]= s1.compare(s2);
n[1] = s1.compare(1, 2, s2, 0, 3);  //比较s1的子串 (1,2) 和s2的子串 (0,3)
n[2] = s1.compare(0, 2, s2);  // 比较s1的子串 (0,2) 和 s2
n[3] = s1.compare("Hello");
n[4] = s1.compare(1, 2, "Hello");  //比较 s1 的子串(1,2)和"Hello”
n[5] = s1.compare(1, 2, "Hello", 1, 2);  //比较 s1 的子串(1,2)和 "Hello" 的子串(1,2)
```

***代码***

```c++
#include <iostream>
using namespace std;
void comp()
{
    string s1("hello"), s2("hello, world");
    int n[6];
    n[0]= s1.compare(s2);
    n[1] = s1.compare(1, 2, s2, 0, 3);  //比较s1的子串 (1,2) 和s2的子串 (0,3)
    n[2] = s1.compare(0, 2, s2);  // 比较s1的子串 (0,2) 和 s2
    n[3] = s1.compare("Hello");
    n[4] = s1.compare(1, 2, "Hello");  //比较 s1 的子串(1,2)和"Hello”
    n[5] = s1.compare(1, 2, "Hello", 1, 2);  //比较 s1 的子串(1,2)和 "Hello" 的子串(1,2)
    for(int i = 0;i < 6;i ++)
    {
        cout<<" n"<<'['<<i<<']'<<"="<<n[i]<<endl;
    }

}
int main()
{
   comp();
   return 0;
}
```

***截图***

![](https://pic.imgdb.cn/item/6149b8cd2ab3f51d91101f5f.png)

### 7、交换两个string对象的内容

```c++
string s1("geigeigei");
string s2("hahaha");
s1.swap(s2);//这里也可以用s2.swap(s1);
```

***代码***

```c++
#include <iostream>
#include <string>
using namespace std;
void swapstr()
{
    string s1("geigeigei");
    string s2("hahaha");
    s1.swap(s2);
    cout<<"s1 = "<<s1<<"\ns2 = "<<s2<<endl;
}
int main()
{
    swapstr();
   return 0;
}
```

***截图***

![](https://pic.imgdb.cn/item/6149b9f22ab3f51d91119fdf.png)

### 8、字符串的查找

- find：从前往后查找子串或字符出现的位置。

- rfind：从后往前查找子串或字符出现的位置。

```c++
string s1("testOHHHHHtestaaa");
int pos1 = s1.find("test");
int pos2 = s1.rfind("test");
```

***代码***

```c++
#include <iostream>
#include <string>
using namespace std;
void findstr()
{
    string s1("testOHHHHHtestaaa");
    int pos1 = s1.find("test");
    int pos2 = s1.rfind("test");
    cout<<"pos1 = "<<pos1<<"\npos2 = "<<pos2<<endl;
}
int main()
{
    findstr();
    return 0;
}
```

***截图***

![](https://pic.imgdb.cn/item/6149bbe42ab3f51d91145ecd.png)

### 9、字符串的替换

- replace 成员函数可以对 string 对象中的子串进行替换，返回值为对象自身的引用

```c++
string s1("Real Steel");
s1.replace(1, 3, "123456", 2, 4);  //用 "123456" 的子串(2,4) 替换 s1 的子串(1,3)
cout << s1 << endl;  //输出 R3456 Steel
string s2("Harry Potter");
s2.replace(2, 3, 5, '0');  //用 5 个 'O' 替换子串(2,3)
cout << s2 << endl;  //输出 HaOOOOO Potter
int n = s2.find("OOOOO");  //查找子串 "00000" 的位置，n=2
s2.replace(n, 5, "XXX");  //将子串(n,5)替换为"XXX"
cout << s2 < < endl;  //输出 HaXXX Potter
```

***代码***

```c++
#include <iostream>
#include <string>
using namespace std;
void replacestr()
{
    string s1("Real Steel");
    s1.replace(1, 3, "123456", 2, 4);  //用 "123456" 的子串(2,4) 替换 s1 的子串(1,3)
    cout << s1 << endl;  //输出 R3456 Steel
    string s2("Harry Potter");
    s2.replace(2, 3, 5, 'O');  //用 5 个 '0' 替换子串(2,3)
    cout << s2 << endl;  //输出 HaOOOOO Potter
    int n = s2.find("OOOOO");  //查找子串 "00000" 的位置，n=2
    s2.replace(n, 5, "XXX");  //将子串(n,5)替换为"XXX"
    cout<<s2<<endl;//输出haXXX Potter
}
int main()
{
    replacestr();
    return 0;
}
```

***截图***

![](https://pic.imgdb.cn/item/6149bdd22ab3f51d911783f5.png)

### 10、字符串的删除

- erase 成员函数可以删除 string 对象中的子串，返回值为对象自身的引用

```c++
string s1("Real Steel");
s1.erase(1, 3);  //删除子串(1, 3)，此后 s1 = "R Steel"
s1.erase(5);  //删除下标5及其后面的所有字符，此后 s1 = "R Ste"
```

***代码***

```c++
#include <iostream>
#include <string>
using namespace std;
void erasestr()
{
    string s1("Real Steel");
    s1.erase(1, 3);  //删除子串(1, 3)，此后 s1 = "R Steel"
    cout<<s1<<endl;
    s1.erase(5);  //删除下标5及其后面的所有字符，此后 s1 = "R Ste"
    cout<<s1<<endl;
}
int main()
{

    erasestr();
    return 0;
}
```

***截图***

![](https://pic.imgdb.cn/item/6149bea62ab3f51d9118ab2f.png)

### 12、插入字符串

- insert 成员函数可以在 string 对象中插入另一个字符串，返回值为对象自身的引用。

```c++
string s1("Limitless"), s2("00");
s1.insert(2, "123");  //在下标 2 处插入字符串"123"，s1 = "Li123mitless"
s1.insert(3, s2);  //在下标 2 处插入 s2 , s1 = "Li10023mitless"
s1.insert(3, 5, 'X');  //在下标 3 处插入 5 个 'X'，s1 = "Li1XXXXX0023mitless"
```

***代码***

```c++
#include <iostream>
#include <string>
using namespace std;
void insertstr()
{
    string s1("Limitless"), s2("00");
    s1.insert(2, "123");  //在下标 2 处插入字符串"123"，s1 = "Li123mitless"
    cout<<s1<<endl;
    s1.insert(3, s2);  //在下标 2 处插入 s2 , s1 = "Li10023mitless"
    cout<<s1<<endl;
    s1.insert(3, 5, 'X');  //在下标 3 处插入 5 个 'X'，s1 = "Li1XXXXX0023mitless"
    cout<<s1<<endl;
}
int main()
{
    insertstr();
    return 0;
}
```

***截图***

![](https://pic.imgdb.cn/item/6149bf5f2ab3f51d9119b140.png)

# 二、简单通讯录程序

***截图***

![](https://pic.imgdb.cn/item/6149c15b2ab3f51d911c5e96.png)

***代码***

```c++
#include <iostream>
#include <string>
#include <fstream>
using namespace std;
#define FILENAME "book.txt"//储存联系人的文件名
#define MAX_COUNT 100//设定通讯录的最大容量
//联系人结构体，包含的数据有姓名和电话号码
struct Person
{
    string name;
    string phoneNumber;
};

//通讯录类，负责管理联系人类
class Book
{
public:
    Book()
    {
        this->personCount = 0;
    }
    void initialize()//负责初始化的函数
    {
        //先判断外部文件是否存在，若存在则读取，否则创建一个新的通讯录
        fstream f(FILENAME,ios::in);
        if(f)
        {
            for(int i = 0;!f.eof();i ++)
            {
                string name;
                string phoneNumber;
                f>>name>>phoneNumber;
                if(!name.empty()&&!phoneNumber.empty())
                {
                    this->data[i].name = name;
                    this->data[i].phoneNumber = phoneNumber;
                    this->personCount++;
                }
            }
            f.close();
        }
        else
        {
            f.open(FILENAME,ios::out);
            cout<<"通讯录为空，已创建一个新的通讯录"<<endl;
            f.close();
        }
    }
    void find(string  target)//通过联系人姓名,或者电话查找联系人
    {
        if(this->personCount == 0)
        {
            cout<<"通讯录为空！"<<endl;
            return;
        }
        int i = 0;
        int resultcount = 0;
        while(i < this->personCount)
        {
            if(this->data[i].name == target||this->data[i].phoneNumber == target)
            {
                resultcount ++;
                cout<<"第"<<resultcount<<"条结果如下:"<<endl;
                cout<<"姓名："<<this->data[i].name<<"\t电话号码："<<this->data[i].phoneNumber<<endl;
            }
            i++;
        }
        if(resultcount == 0)
        {
            cout<<"未查询到相关信息！"<<endl;
        }
    }
    void addPerson()//添加联系人
    {
        string name;
        string phoneNumber;
        cout<<"请输入新建联系人的姓名：";
        cin>>name;
        for(int i = 0; i < this->personCount;i ++)
        {
            if(name == this->data[i].name)
            {
                cout<<"联系人已存在！"<<endl;
                return;
            }
        }
        cout<<name<<"的号码是：";
        cin>>phoneNumber;
        for(int i = 0;i < this->personCount ;i ++)
        {
            if(phoneNumber == this->data[i].phoneNumber)
            {
                cout<<"该号码和联系人："<<this->data[i].name<<" 的号码相同！"<<endl;
                return;
            }
        }
        this->data[this->personCount].name = name;
        this->data[this->personCount].phoneNumber = phoneNumber;
        this->personCount++;
    }
    void showBook()
    {
        int i = 0;
        cout<<"|姓名\t\t| 号码\t\t|"<<endl;
        for(i = 0;i < this->personCount;i ++)
        {
            cout<<"|"<<this->data[i].name<<"\t\t|"<<" "<<this->data[i].phoneNumber<<"\t|"<<endl;
        }
    }
    void save()
    {
        fstream f(FILENAME,ios::out);
        if(f)
        {
            for(int i = 0;i < this->personCount - 1;i ++)
            {
                f<<this->data[i].name<<" "<<this->data[i].phoneNumber<<endl;
            }
            f<<this->data[this->personCount - 1].name<<" "<<this->data[this->personCount - 1].phoneNumber;
        }
        else
        {
            cout<<"文件打卡失败！"<<endl;
        }
        f.close();
    }
    int getPersonCount()
    {
        return this->personCount;
    }
private:
    Person data[MAX_COUNT];
    int personCount;


};
void showMenu()//显示菜单的函数
{
    cout<<"[===================================]"<<endl;
    cout<<"[---------1.显示通讯录--------------]"<<endl;
    cout<<"[---------2.查找联系人--------------]"<<endl;
    cout<<"[---------3.添加联系人--------------]"<<endl;
    cout<<"[---------4.显示菜单----------------]"<<endl;
    cout<<"[---------0.退出程序----------------]"<<endl;
    cout<<"[===================================]"<<endl;

}
void menuLogic(Book &b)
{
    showMenu();
    int ch;//记录用户输入
    bool isRun = true;//记录程序运行状态
    while(isRun)
    {
        cout<<"输入你的操作(输入4显示菜单):";
        cin>>ch;
        switch(ch)
        {
        case 1:{
                   b.showBook();break;
               }
        case 2:{
                   string target;
                   cout<<"输入你要查找的联系人的姓名或者号码：";
                   cin>>target;
                   b.find(target);
                   break;
               }
        case 3:{
                   b.addPerson();break;
               }
        case 4:{
                   showMenu();
                   break;
               }
        case 0:{
                   isRun = false;
                   b.save();//退出时自动保存到文件
                   break;
               }
        default:
               cout<<"输入错误！"<<endl;
        }
    }
}
int main()
{
    Book b;
    b.initialize();
    menuLogic(b);
    return 0;
}
```